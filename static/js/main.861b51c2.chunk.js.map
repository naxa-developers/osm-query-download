{"version":3,"sources":["MapComponents/MapContext/index.js","MapComponents/MapContainer/index.jsx","MapComponents/MapContextWrapper/index.jsx","MapComponents/Layers/TileLayer.js","MapComponents/useOLMap/index.js","osm_const.js","App.js","MapComponents/Source/index.jsx","index.js"],"names":["MapContext","createContext","MapContainer","mapRef","children","rest","ref","id","className","MapContextWrapper","providerValue","Provider","value","defaultProps","TileLayer","source","zIndex","type","title","visible","map","useContext","useEffect","tileLayer","OLTileLayer","addLayer","setZIndex","removeLayer","propTypes","PropTypes","object","isRequired","number","string","bool","useOLMap","scaleBar","useRef","useState","setMap","renderComplete","setRenderComplete","options","layers","controls","overlays","view","View","center","zoom","target","current","mapInstance","Map","addControl","ScaleLine","units","bar","steps","text","minWidth","setTarget","undefined","on","onRenderComplete","un","extent","olExtent","getLayers","forEach","layer","VectorLayer","getSource","getExtent","Infinity","setTimeout","OSM","overpassFrontend","OverpassFrontend","toTitleCase","str","replace","txt","charAt","toUpperCase","substr","toLowerCase","App","osmkey","setOsmkey","osmvalue","setOsmvalue","valueOptions","setValueOptions","keyOptions","Object","keys","key","push","label","onChange","e","a","onClick","transformExtent","getView","calculateExtent","BBoxQuery","minlat","maxlat","minlon","maxlon","properties","ALL","err","result","data","marker","Point","fromLonLat","geometry","lon","lat","point","VectorSource","features","Feature","style","Style","image","Circle","radius","fill","Fill","color","includes","linearray","line","LineString","feature","linelayer","stroke","Stroke","width","polyarray","polygon","Polygon","polygonFeature","polygonLayer","console","log","getArray","index","geom","getFeatures","downloadGeometry","json","GeoJSON","writeFeatures","featureProjection","blob","Blob","url","URL","createObjectURL","document","createElement","href","download","click","height","rootElement","getElementById","ReactDOM","render"],"mappings":"iRAIeA,EAFIC,0B,gCCkBJC,EAhBM,SAAC,GAAmC,IAAjCC,EAAgC,EAAhCA,OAAQC,EAAwB,EAAxBA,SAAaC,EAAW,iBACtD,OACE,6CAAKC,IAAKH,EAAQI,GAAG,SAASC,UAAU,UAAaH,GAArD,aACGD,M,+BCDDK,EAAoB,SAAC,GAA0C,IAAxCC,EAAuC,EAAvCA,cAAeN,EAAwB,EAAxBA,SAAaC,EAAW,iBAClE,OACE,cAAC,EAAWM,SAAZ,CAAqBC,MAAOF,EAA5B,SACE,cAAC,EAAD,2BAAkBL,GAAlB,aAAyBD,QAK/BK,EAAkBI,aAAe,CAC/BH,cAAe,IAQFD,Q,0BCdFK,EAAY,SAAC,GAA8C,IAA5CC,EAA2C,EAA3CA,OAAQC,EAAmC,EAAnCA,OAAQC,EAA2B,EAA3BA,KAAMC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,QAC/CC,EAAQC,qBAAWrB,GAAnBoB,IAuBR,OArBAE,qBAAU,WACR,IAAKF,EAAK,OAAO,aAEjB,IAAMG,EAAY,IAAIC,IAAY,CAChCT,SACAE,OACAD,SACAE,QACAC,YAKF,OAHAC,EAAIK,SAASF,GACbA,EAAUG,UAAUV,GAEb,WACDI,GACFA,EAAIO,YAAYJ,MAInB,CAACH,IAEG,MAGTN,EAAUD,aAAe,CACvBI,KAAM,QACNC,MAAO,GACPC,SAAS,EACTH,OAAQ,GAGVF,EAAUc,UAAY,CACpBb,OAAQc,IAAUC,OAAOC,WACzBf,OAAQa,IAAUG,OAClBf,KAAMY,IAAUI,OAChBf,MAAOW,IAAUI,OAEjBd,QAASU,IAAUK,MAGNpB,Q,2CCjCf,IAkDeqB,EAlDE,SAAC,GAA0B,IAAD,IAAvBC,gBAAuB,SACnCjC,EAASkC,mBACf,EAAsBC,mBAAS,MAA/B,mBAAOlB,EAAP,KAAYmB,EAAZ,KACA,EAA4CD,mBAAS,MAArD,mBAAOE,EAAP,KAAuBC,EAAvB,KA4CA,OA1CAnB,qBAAU,WACR,IAAMoB,EAAU,CACdC,OAAQ,GACRC,SAAU,GACVC,SAAU,GACVC,KAAM,IAAIC,IAAK,CACbC,OAAQ,CAAC,iBAAkB,oBAC3BC,KAAM,IAERC,OAAQ/C,EAAOgD,SAEXC,EAAc,IAAIC,IAAIX,GAK5B,OAJAH,EAAOa,GAEPA,EAAYE,WA7BE,IAAIC,IAAU,CAC5BC,MAAO,SACPC,KAAK,EACLC,MAAO,EACPC,MAAM,EACNC,SAAU,OA0BH,kBAAMR,EAAYS,eAAUC,MAClC,CAAC1B,IAEJd,qBAAU,WACR,GAAKF,EAmBL,OAFAA,EAAI2C,GAAG,iBAAkBC,GAElB,kBAAM5C,GAAOA,EAAI6C,GAAG,iBAAkBD,IAjB7C,SAASA,IACP,IAAME,EAASC,MACA/C,EAAIgD,YACZC,SAAQ,SAAAC,GACTA,aAAiBC,KACnBJ,IAAgBD,EAAQI,EAAME,YAAYC,gBAG1CP,EAAO,KAAOQ,MAChBC,YAAW,WACTlC,GAAkB,KACjB,KACHrB,EAAI6C,GAAG,iBAAkBD,OAM5B,CAAC5C,IAEG,CAAEjB,SAAQiB,MAAKoB,mB,sEClEXoC,EAAM,CAClB,QAAW,CACH,YACA,QACA,gBACA,iBACA,OACA,SACA,UACA,WACA,gBACA,SACA,SACA,WACA,UACA,WACA,WACA,iBAER,YAAe,CACd,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KACA,MAED,QAAW,CACV,kBACA,iBACA,cACA,MACA,OACA,MACA,QACA,MACA,kBACA,iBACA,aACA,cACA,OACA,SACA,aACA,cACA,WACA,SACA,QACA,SACA,UACA,mBACA,kBACA,cACA,UACA,UACA,iBACA,UACA,YACA,eACA,WACA,OACA,WACA,aACA,WACA,eACA,UACA,cACA,YACA,UACA,WACA,mBACA,cACA,SACA,WACA,cACA,SACA,MACA,YACA,aACA,SACA,UACA,SACA,kBACA,gBACA,cACA,OACA,UACA,UACA,WACA,aACA,kBACA,cAED,SAAY,CACX,iBACA,WACA,gBACA,2BACA,kBAED,SAAY,CACX,aACA,aACA,OACA,QACA,QACA,aACA,SACA,OAED,KAAQ,CACP,UACA,SACA,eACA,OACA,QACA,cACA,WACA,iBACA,UACA,QACA,QACA,MACA,iBACA,KACA,SACA,WACA,UACA,OACA,OACA,aACA,MACA,SAED,QAAW,CACV,QACA,WACA,WACA,SACA,OACA,YACA,UACA,cACA,QACA,WACA,QACA,UACA,QACA,WACA,WACA,OACA,iBACA,aACA,UACA,OACA,YACA,QACA,gBACA,SACA,UACA,QACA,MACA,QACA,WACA,WACA,UACA,kBACA,UACA,cACA,MACA,QACA,QACA,QACA,aACA,SAED,MAAS,CACR,uBACA,eACA,YACA,aACA,UACA,cACA,YACA,UACA,gBACA,aACA,cACA,WACA,WACA,aACA,OACA,aACA,WACA,aACA,WACA,UACA,eACA,UACA,SACA,SACA,aACA,UAED,UAAa,CACZ,oBACA,iBACA,gBACA,oBACA,eACA,QACA,QACA,cAED,kBAAqB,CACpB,OAED,QAAW,CACV,WACA,QACA,UACA,YACA,WACA,eACA,cACA,gBACA,UACA,QACA,OACA,UACA,aACA,WACA,QACA,OACA,eACA,WACA,WACA,kBACA,eACA,OACA,cACA,kBACA,kBAED,SAAY,CACX,OACA,WACA,gBACA,QACA,iBACA,eACA,eAED,SAAY,CACX,aACA,YACA,SACA,OAED,SAAY,CACX,sBACA,WACA,cACA,iBACA,WACA,SACA,SACA,YACA,YACA,OACA,OACA,QACA,WACA,WACA,QACA,aACA,OACA,gBACA,iBACA,OAED,QAAW,CACV,aACA,QACA,aACA,WACA,aACA,eACA,OACA,WACA,WACA,SACA,UACA,QACA,aACA,aACA,WACA,SACA,WACA,UACA,gBACA,SACA,UACA,YACA,cACA,SACA,YAED,QAAW,CACV,UACA,SACA,cACA,cACA,SACA,iBACA,iBACA,OACA,QACA,aACA,gBACA,UACA,gBACA,QACA,cAED,SAAY,CACX,UACA,QACA,aACA,qBACA,OACA,WACA,eACA,eACA,QACA,cACA,QACA,OAED,QAAW,CACV,MACA,QACA,gBACA,QACA,SACA,YACA,OACA,WACA,UACA,YACA,QACA,MACA,OACA,SACA,OACA,QACA,QACA,SACA,QACA,OACA,WACA,UACA,QACA,UACA,QAED,OAAU,CACT,aACA,iBACA,YACA,cACA,UACA,0BACA,oBACA,eACA,WACA,aACA,aACA,QACA,YACA,KACA,SACA,YACA,MACA,SACA,kBACA,SACA,WACA,WACA,WACA,MACA,oBACA,eACA,iBAED,MAAS,CACR,aACA,cACA,OACA,YACA,SACA,UACA,WACA,OACA,SACA,SACA,QACA,oBACA,WACA,eACA,gBACA,WACA,QACA,SACA,SACA,OACA,WAED,MAAS,CACR,QACA,QACA,YACA,OACA,aACA,OACA,aACA,SACA,QACA,eAED,QAAW,CACV,UACA,UACA,SACA,kBACA,OACA,YACA,cACA,YACA,OACA,UACA,SACA,MACA,QACA,OACA,MACA,QACA,WACA,cACA,QACA,cACA,OACA,UACA,MACA,MACA,QACA,UACA,SACA,OACA,OACA,UACA,SACA,QACA,YACA,YACA,MACA,SACA,OACA,aAED,iBAAoB,CACnB,gBACA,WACA,UACA,aAED,KAAQ,CACP,UACA,WACA,MACA,aACA,SACA,MACA,sBACA,SACA,MACA,YACA,UACA,QACA,WACA,UACA,MACA,aACA,YACA,SACA,UACA,SACA,UACA,YACA,UACA,SACA,WACA,gBACA,cACA,WACA,YACA,QACA,UACA,OACA,mBACA,QACA,eACA,eACA,cACA,SACA,SACA,OACA,UACA,UACA,UACA,QACA,oBACA,YACA,UACA,OACA,cACA,WACA,eACA,YACA,OACA,UACA,sBACA,UACA,QACA,UACA,cACA,UACA,UACA,UACA,OACA,UACA,iBACA,eACA,eACA,aACA,QACA,qBACA,YACA,WACA,UACA,UACA,QACA,MACA,QACA,eACA,UACA,cACA,QACA,SACA,aACA,cACA,SACA,SACA,MACA,SACA,UACA,OACA,gBACA,QACA,SACA,gBACA,QACA,cACA,eACA,UACA,QAED,MAAS,CACR,OACA,QACA,oBACA,UACA,YACA,sBACA,OACA,YACA,WACA,kBACA,YACA,MACA,SACA,QACA,SACA,QACA,QACA,WACA,qBACA,UACA,aACA,cACA,OACA,WACA,eACA,UACA,cACA,kBACA,YACA,QACA,QACA,iBACA,eACA,cACA,UACA,UACA,WACA,aACA,SACA,SACA,WACA,SACA,cAED,QAAW,CACV,YACA,cACA,eACA,WACA,UACA,YACA,OACA,iBACA,YACA,eACA,YACA,OACA,UACA,SACA,kBACA,SACA,OACA,aAED,MAAS,CACR,UACA,MACA,QACA,SACA,MACA,WACA,QACA,QACA,UACA,OACA,MACA,QACA,QAED,QAAW,CACV,aACA,aACA,aACA,UACA,YACA,eACA,SACA,UACA,cACA,SACA,QACA,cACA,QACA,SACA,cACA,aACA,YACA,MACA,OAED,MAAS,CACR,eACA,cACA,gBACA,gBACA,gBACA,WACA,aACA,YACA,eACA,eACA,iBACA,gBACA,gBACA,YACA,gBACA,aACA,eACA,eACA,kBACA,cACA,eACA,cACA,eACA,kBACA,iBACA,cACA,kBACA,cACA,eACA,eACA,cACA,aACA,cACA,kBACA,mBACA,kBACA,aACA,oBACA,iBACA,YACA,YACA,aACA,gBAED,SAAY,CACX,QACA,QACA,MACA,OACA,QACA,QACA,YACA,SACA,S,mDCzsBIC,EAAmB,IAAIC,IAAiB,qCAGxCC,EAAc,SAAAC,GAAG,OAAIA,EAAIC,QAAQ,UAAU,SAAAC,GAAG,OAAIA,EAAIC,OAAO,GAAGC,cAAgBF,EAAIG,OAAO,GAAGC,kBAErF,SAASC,IACtB,MAAwBpD,EAAS,CAAEC,UAAU,IAArCjC,EAAR,EAAQA,OAAQiB,EAAhB,EAAgBA,IAChB,EAA4BkB,mBAAS,MAArC,mBAAOkD,EAAP,KAAeC,EAAf,KACA,EAAgCnD,mBAAS,MAAzC,mBAAOoD,EAAP,KAAiBC,EAAjB,KACA,EAAwCrD,mBAAS,IAAjD,mBAAOsD,EAAP,KAAqBC,EAArB,KAEIC,EAAa,GAEjBC,OAAOC,KAAKpB,GAAKP,SAAQ,SAAA4B,GACvBH,EAAWI,KAAK,CAAEtF,MAAOqF,EAAKE,MAAOpB,EAAYkB,GAAKhB,QAAQ,IAAK,UA6IrE,OACE,sBAAKzE,UAAU,MAAf,UACE,cAAC,IAAD,CAAQkC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","file":"static/js/main.861b51c2.chunk.js","sourcesContent":["import { createContext } from 'react';\n\nconst MapContext = createContext();\n\nexport default MapContext;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport PropTypes from 'prop-types';\n\nconst MapContainer = ({ mapRef, children, ...rest }) => {\n  return (\n    <div ref={mapRef} id=\"ol-map\" className=\"ol-map\" {...rest}  >\n      {children}\n    </div>\n  );\n};\n\nMapContainer.propTypes = {\n  children: PropTypes.node.isRequired,\n  mapRef: PropTypes.oneOfType([\n    PropTypes.func,\n    PropTypes.shape({ current: PropTypes.any }),\n  ]).isRequired,\n};\n\nexport default MapContainer;\n","/* eslint-disable react/forbid-prop-types */\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport MapContext from '../MapContext';\nimport MapContainer from '../MapContainer';\n\nconst MapContextWrapper = ({ providerValue, children, ...rest }) => {\n  return (\n    <MapContext.Provider value={providerValue}>\n      <MapContainer {...rest}>{children}</MapContainer>\n    </MapContext.Provider>\n  );\n};\n\nMapContextWrapper.defaultProps = {\n  providerValue: {},\n};\n\nMapContextWrapper.propTypes = {\n  children: PropTypes.node.isRequired,\n  providerValue: PropTypes.object,\n};\n\nexport default MapContextWrapper;\n","/* eslint-disable react-hooks/exhaustive-deps */\n/* eslint-disable react/forbid-prop-types */\nimport { useContext, useEffect } from 'react';\nimport PropTypes from 'prop-types';\n\nimport OLTileLayer from 'ol/layer/Tile';\n\nimport MapContext from '../MapContext';\n\nexport const TileLayer = ({ source, zIndex, type, title, visible }) => {\n  const { map } = useContext(MapContext);\n\n  useEffect(() => {\n    if (!map) return () => {};\n\n    const tileLayer = new OLTileLayer({\n      source,\n      type,\n      zIndex,\n      title,\n      visible,\n    });\n    map.addLayer(tileLayer);\n    tileLayer.setZIndex(zIndex);\n\n    return () => {\n      if (map) {\n        map.removeLayer(tileLayer);\n      }\n    };\n    // }, [map, source, title, type, visible, zIndex]);\n  }, [map]);\n\n  return null;\n};\n\nTileLayer.defaultProps = {\n  type: 'layer',\n  title: '',\n  visible: true,\n  zIndex: 0,\n};\n\nTileLayer.propTypes = {\n  source: PropTypes.object.isRequired,\n  zIndex: PropTypes.number,\n  type: PropTypes.string,\n  title: PropTypes.string,\n  // Context: PropTypes.object.isRequired,\n  visible: PropTypes.bool,\n};\n\nexport default TileLayer;\n","/* eslint-disable consistent-return */\nimport { useRef, useState, useEffect } from 'react';\nimport Map from 'ol/Map';\nimport { View } from 'ol';\nimport * as olExtent from 'ol/extent';\nimport VectorLayer from 'ol/layer/Vector';\nimport { ScaleLine, defaults as defaultControls } from 'ol/control';\n\nfunction scaleControl() {\n  const control = new ScaleLine({\n    units: 'metric',\n    bar: true,\n    steps: 4,\n    text: true,\n    minWidth: 140,\n  });\n  return control;\n}\n\nconst useOLMap = ({ scaleBar = false }) => {\n  const mapRef = useRef();\n  const [map, setMap] = useState(null);\n  const [renderComplete, setRenderComplete] = useState(null);\n\n  useEffect(() => {\n    const options = {\n      layers: [],\n      controls: [],\n      overlays: [],\n      view: new View({\n        center: [9508595.54043558, 3212952.3094566735 ], //V\n        zoom: 7, //14\n      }),\n      target: mapRef.current,\n    };\n    const mapInstance = new Map(options);\n    setMap(mapInstance);\n\n    mapInstance.addControl(scaleControl());\n\n    return () => mapInstance.setTarget(undefined);\n  }, [scaleBar]);\n\n  useEffect(() => {\n    if (!map) return;\n\n    function onRenderComplete() {\n      const extent = olExtent.createEmpty();\n      const layers = map.getLayers();\n      layers.forEach(layer => {\n        if (layer instanceof VectorLayer) {\n          olExtent.extend(extent, layer.getSource().getExtent());\n        }\n      });\n      if (extent[0] !== Infinity) {\n        setTimeout(() => {\n          setRenderComplete(true);\n        }, 500);\n        map.un('rendercomplete', onRenderComplete);\n      }\n    }\n    map.on('rendercomplete', onRenderComplete);\n\n    return () => map && map.un('rendercomplete', onRenderComplete);\n  }, [map]);\n\n  return { mapRef, map, renderComplete };\n};\n\nexport default useOLMap;\n","export const OSM = {\n\t\"aeroway\": [\n         \"aerodrome\",\n         \"apron\",\n         \"control_tower\",\n         \"control_center\",\n         \"gate\",\n         \"hangar\",\n         \"helipad\",\n         \"heliport\",\n         \"navigationaid\",\n         \"beacon\",\n         \"runway\",\n         \"taxilane\",\n         \"taxiway\",\n         \"terminal\",\n         \"windsock\",\n         \"highway_strip\"\n    ],\n\t\"admin_level\": [\n\t\t\"1\",\n\t\t\"2\",\n\t\t\"3\",\n\t\t\"4\",\n\t\t\"5\",\n\t\t\"7\",\n\t\t\"8\",\n\t\t\"9\",\n\t\t\"10\",\n\t\t\"11\"\n\t],\n\t\"amenity\": [\n\t\t\"animal_boarding\",\n\t\t\"animal_shelter\",\n\t\t\"arts_centre\",\n\t\t\"atm\",\n\t\t\"bank\",\n\t\t\"bar\",\n\t\t\"bench\",\n\t\t\"bbq\",\n\t\t\"bicycle_parking\",\n\t\t\"bicycle_rental\",\n\t\t\"biergarten\",\n\t\t\"bus_station\",\n\t\t\"cafe\",\n\t\t\"casino\",\n\t\t\"car_rental\",\n\t\t\"car_sharing\",\n\t\t\"car_wash\",\n\t\t\"clinic\",\n\t\t\"clock\",\n\t\t\"cinema\",\n\t\t\"college\",\n\t\t\"community_centre\",\n\t\t\"coworking_space\",\n\t\t\"crematorium\",\n\t\t\"dentist\",\n\t\t\"doctors\",\n\t\t\"drinking_water\",\n\t\t\"embassy\",\n\t\t\"fast_food\",\n\t\t\"fire_station\",\n\t\t\"fountain\",\n\t\t\"fuel\",\n\t\t\"gambling\",\n\t\t\"grave_yard\",\n\t\t\"hospital\",\n\t\t\"kindergarten\",\n\t\t\"library\",\n\t\t\"marketplace\",\n\t\t\"nightclub\",\n\t\t\"parking\",\n\t\t\"pharmacy\",\n\t\t\"place_of_worship\",\n\t\t\"planetarium\",\n\t\t\"police\",\n\t\t\"post_box\",\n\t\t\"post_office\",\n\t\t\"prison\",\n\t\t\"pub\",\n\t\t\"recycling\",\n\t\t\"restaurant\",\n\t\t\"school\",\n\t\t\"shelter\",\n\t\t\"shower\",\n\t\t\"social_facility\",\n\t\t\"social_centre\",\n\t\t\"swingerclub\",\n\t\t\"taxi\",\n\t\t\"theatre\",\n\t\t\"toilets\",\n\t\t\"townhall\",\n\t\t\"university\",\n\t\t\"vending_machine\",\n\t\t\"veterinary\"\n\t],\n\t\"boundary\": [\n\t\t\"administrative\",\n\t\t\"maritime\",\n\t\t\"national_park\",\n\t\t\"religious_administration\",\n\t\t\"protected_area\"\n\t],\n\t\"building\": [\n\t\t\"apartments\",\n\t\t\"commercial\",\n\t\t\"farm\",\n\t\t\"hotel\",\n\t\t\"house\",\n\t\t\"industrial\",\n\t\t\"retail\",\n\t\t\"yes\"\n\t],\n\t\"crop\": [\n\t\t\"bananas\",\n\t\t\"barley\",\n\t\t\"berry_plants\",\n\t\t\"corn\",\n\t\t\"dairy\",\n\t\t\"dry_farming\",\n\t\t\"feed_lot\",\n\t\t\"field_cropland\",\n\t\t\"flowers\",\n\t\t\"grape\",\n\t\t\"grass\",\n\t\t\"hay\",\n\t\t\"native_pasture\",\n\t\t\"no\",\n\t\t\"orchid\",\n\t\t\"potatoes\",\n\t\t\"poultry\",\n\t\t\"rape\",\n\t\t\"rice\",\n\t\t\"strawberry\",\n\t\t\"yes\",\n\t\t\"wheat\"\n\t],\n\t\"cuisine\": [\n\t\t\"bagel\",\n\t\t\"barbecue\",\n\t\t\"bougatsa\",\n\t\t\"burger\",\n\t\t\"cake\",\n\t\t\"casserole\",\n\t\t\"chicken\",\n\t\t\"coffee_shop\",\n\t\t\"crepe\",\n\t\t\"couscous\",\n\t\t\"curry\",\n\t\t\"dessert\",\n\t\t\"donut\",\n\t\t\"doughnut\",\n\t\t\"empanada\",\n\t\t\"fish\",\n\t\t\"fish_and_chips\",\n\t\t\"fried_food\",\n\t\t\"friture\",\n\t\t\"gyro\",\n\t\t\"ice_cream\",\n\t\t\"kebab\",\n\t\t\"mediterranean\",\n\t\t\"noodle\",\n\t\t\"pancake\",\n\t\t\"pasta\",\n\t\t\"pie\",\n\t\t\"pizza\",\n\t\t\"regional\",\n\t\t\"sandwich\",\n\t\t\"sausage\",\n\t\t\"savory_pancakes\",\n\t\t\"seafood\",\n\t\t\"steak_house\",\n\t\t\"sub\",\n\t\t\"sushi\",\n\t\t\"tapas\",\n\t\t\"vegan\",\n\t\t\"vegetarian\",\n\t\t\"wings\"\n\t],\n\t\"craft\": [\n\t\t\"agricultural_engines\",\n\t\t\"basket_maker\",\n\t\t\"beekeeper\",\n\t\t\"blacksmith\",\n\t\t\"brewery\",\n\t\t\"boatbuilder\",\n\t\t\"carpenter\",\n\t\t\"caterer\",\n\t\t\"confectionery\",\n\t\t\"dressmaker\",\n\t\t\"electrician\",\n\t\t\"gardener\",\n\t\t\"glaziery\",\n\t\t\"handicraft\",\n\t\t\"hvac\",\n\t\t\"insulation\",\n\t\t\"jeweller\",\n\t\t\"key_cutter\",\n\t\t\"optician\",\n\t\t\"painter\",\n\t\t\"photographer\",\n\t\t\"plumber\",\n\t\t\"roofer\",\n\t\t\"tailor\",\n\t\t\"watchmaker\",\n\t\t\"winery\"\n\t],\n\t\"emergency\": [\n\t\t\"ambulance_station\",\n\t\t\"assembly_point\",\n\t\t\"defibrillator\",\n\t\t\"fire_extinguisher\",\n\t\t\"fire_hydrant\",\n\t\t\"phone\",\n\t\t\"siren\",\n\t\t\"water_tank\"\n\t],\n\t\"evacuation_center\": [\n\t\t\"yes\"\n\t],\n\t\"highway\": [\n\t\t\"motorway\",\n\t\t\"trunk\",\n\t\t\"primary\",\n\t\t\"secondary\",\n\t\t\"tertiary\",\n\t\t\"unclassified\",\n\t\t\"residential\",\n\t\t\"living_street\",\n\t\t\"service\",\n\t\t\"track\",\n\t\t\"road\",\n\t\t\"footway\",\n\t\t\"pedestrian\",\n\t\t\"cycleway\",\n\t\t\"steps\",\n\t\t\"path\",\n\t\t\"construction\",\n\t\t\"bus_stop\",\n\t\t\"crossing\",\n\t\t\"mini_roundabout\",\n\t\t\"speed_camera\",\n\t\t\"stop\",\n\t\t\"street_lamp\",\n\t\t\"traffic_signals\",\n\t\t\"turning_circle\"\n\t],\n\t\"cycleway\": [\n\t\t\"lane\",\n\t\t\"opposite\",\n\t\t\"opposite_lane\",\n\t\t\"track\",\n\t\t\"opposite_track\",\n\t\t\"share_busway\",\n\t\t\"shared_lane\"\n\t],\n\t\"junction\": [\n\t\t\"roundabout\",\n\t\t\"jughandle\",\n\t\t\"filter\",\n\t\t\"yes\"\n\t],\n\t\"historic\": [\n\t\t\"archaeological_site\",\n\t\t\"aircraft\",\n\t\t\"battlefield\",\n\t\t\"boundary_stone\",\n\t\t\"building\",\n\t\t\"castle\",\n\t\t\"cannon\",\n\t\t\"city_gate\",\n\t\t\"citywalls\",\n\t\t\"farm\",\n\t\t\"fort\",\n\t\t\"manor\",\n\t\t\"memorial\",\n\t\t\"monument\",\n\t\t\"ruins\",\n\t\t\"rune_stone\",\n\t\t\"ship\",\n\t\t\"wayside_cross\",\n\t\t\"wayside_shrine\",\n\t\t\"yes\"\n\t],\n\t\"landuse\": [\n\t\t\"allotments\",\n\t\t\"basin\",\n\t\t\"brownfield\",\n\t\t\"cemetery\",\n\t\t\"commercial\",\n\t\t\"construction\",\n\t\t\"farm\",\n\t\t\"farmland\",\n\t\t\"farmyard\",\n\t\t\"forest\",\n\t\t\"garages\",\n\t\t\"grass\",\n\t\t\"greenfield\",\n\t\t\"industrial\",\n\t\t\"landfill\",\n\t\t\"meadow\",\n\t\t\"military\",\n\t\t\"orchard\",\n\t\t\"plant_nursery\",\n\t\t\"quarry\",\n\t\t\"railway\",\n\t\t\"reservoir\",\n\t\t\"residential\",\n\t\t\"retail\",\n\t\t\"vineyard\"\n\t],\n\t\"leisure\": [\n\t\t\"fishing\",\n\t\t\"garden\",\n\t\t\"golf_course\",\n\t\t\"hackerspace\",\n\t\t\"marina\",\n\t\t\"miniature_golf\",\n\t\t\"nature_reserve\",\n\t\t\"park\",\n\t\t\"pitch\",\n\t\t\"playground\",\n\t\t\"sports_centre\",\n\t\t\"stadium\",\n\t\t\"swimming_pool\",\n\t\t\"track\",\n\t\t\"water_park\"\n\t],\n\t\"man_made\": [\n\t\t\"chimney\",\n\t\t\"cross\",\n\t\t\"lighthouse\",\n\t\t\"monitoring_station\",\n\t\t\"pier\",\n\t\t\"pipeline\",\n\t\t\"surveillance\",\n\t\t\"survey_point\",\n\t\t\"tower\",\n\t\t\"water_tower\",\n\t\t\"works\",\n\t\t\"yes\"\n\t],\n\t\"natural\": [\n\t\t\"bay\",\n\t\t\"beach\",\n\t\t\"cave_entrance\",\n\t\t\"cliff\",\n\t\t\"crater\",\n\t\t\"coastline\",\n\t\t\"fell\",\n\t\t\"fumarole\",\n\t\t\"glacier\",\n\t\t\"grassland\",\n\t\t\"heath\",\n\t\t\"mud\",\n\t\t\"peak\",\n\t\t\"saddle\",\n\t\t\"sand\",\n\t\t\"scree\",\n\t\t\"scrub\",\n\t\t\"spring\",\n\t\t\"stone\",\n\t\t\"tree\",\n\t\t\"tree_row\",\n\t\t\"volcano\",\n\t\t\"water\",\n\t\t\"wetland\",\n\t\t\"wood\"\n\t],\n\t\"office\": [\n\t\t\"accountant\",\n\t\t\"administrative\",\n\t\t\"architect\",\n\t\t\"association\",\n\t\t\"company\",\n\t\t\"educational_institution\",\n\t\t\"employment_agency\",\n\t\t\"estate_agent\",\n\t\t\"forestry\",\n\t\t\"foundation\",\n\t\t\"government\",\n\t\t\"guide\",\n\t\t\"insurance\",\n\t\t\"it\",\n\t\t\"lawyer\",\n\t\t\"newspaper\",\n\t\t\"ngo\",\n\t\t\"notary\",\n\t\t\"political_party\",\n\t\t\"quango\",\n\t\t\"register\",\n\t\t\"religion\",\n\t\t\"research\",\n\t\t\"tax\",\n\t\t\"telecommunication\",\n\t\t\"travel_agent\",\n\t\t\"water_utility\"\n\t],\n\t\"place\": [\n\t\t\"allotments\",\n\t\t\"archipelago\",\n\t\t\"city\",\n\t\t\"continent\",\n\t\t\"county\",\n\t\t\"country\",\n\t\t\"district\",\n\t\t\"farm\",\n\t\t\"hamlet\",\n\t\t\"island\",\n\t\t\"islet\",\n\t\t\"isolated_dwelling\",\n\t\t\"locality\",\n\t\t\"municipality\",\n\t\t\"neighbourhood\",\n\t\t\"province\",\n\t\t\"state\",\n\t\t\"suburb\",\n\t\t\"region\",\n\t\t\"town\",\n\t\t\"village\"\n\t],\n\t\"power\": [\n\t\t\"cable\",\n\t\t\"plant\",\n\t\t\"generator\",\n\t\t\"line\",\n\t\t\"minor_line\",\n\t\t\"pole\",\n\t\t\"substation\",\n\t\t\"switch\",\n\t\t\"tower\",\n\t\t\"transformer\"\n\t],\n\t\"produce\": [\n\t\t\"berries\",\n\t\t\"cassava\",\n\t\t\"cereal\",\n\t\t\"christmas_trees\",\n\t\t\"cork\",\n\t\t\"crocodile\",\n\t\t\"dry_farming\",\n\t\t\"fire_wood\",\n\t\t\"fish\",\n\t\t\"flowers\",\n\t\t\"forage\",\n\t\t\"hay\",\n\t\t\"herbs\",\n\t\t\"hide\",\n\t\t\"hop\",\n\t\t\"latex\",\n\t\t\"lavender\",\n\t\t\"live_animal\",\n\t\t\"maize\",\n\t\t\"maple_syrup\",\n\t\t\"meat\",\n\t\t\"mussels\",\n\t\t\"nut\",\n\t\t\"oil\",\n\t\t\"olive\",\n\t\t\"oysters\",\n\t\t\"prawns\",\n\t\t\"rape\",\n\t\t\"rice\",\n\t\t\"seaweed\",\n\t\t\"shrimp\",\n\t\t\"spice\",\n\t\t\"sugarcane\",\n\t\t\"sunflower\",\n\t\t\"tea\",\n\t\t\"timber\",\n\t\t\"turf\",\n\t\t\"vegetable\"\n\t],\n\t\"public_transport\": [\n\t\t\"stop_position\",\n\t\t\"platform\",\n\t\t\"station\",\n\t\t\"stop_area\"\n\t],\n\t\"shop\": [\n\t\t\"alcohol\",\n\t\t\"antiques\",\n\t\t\"art\",\n\t\t\"baby_goods\",\n\t\t\"bakery\",\n\t\t\"bag\",\n\t\t\"bathroom_furnishing\",\n\t\t\"beauty\",\n\t\t\"bed\",\n\t\t\"beverages\",\n\t\t\"bicycle\",\n\t\t\"books\",\n\t\t\"boutique\",\n\t\t\"butcher\",\n\t\t\"car\",\n\t\t\"car_repair\",\n\t\t\"car_parts\",\n\t\t\"carpet\",\n\t\t\"charity\",\n\t\t\"cheese\",\n\t\t\"chemist\",\n\t\t\"chocolate\",\n\t\t\"clothes\",\n\t\t\"coffee\",\n\t\t\"computer\",\n\t\t\"confectionery\",\n\t\t\"convenience\",\n\t\t\"copyshop\",\n\t\t\"cosmetics\",\n\t\t\"craft\",\n\t\t\"curtain\",\n\t\t\"deli\",\n\t\t\"department_store\",\n\t\t\"dairy\",\n\t\t\"dry_cleaning\",\n\t\t\"doityourself\",\n\t\t\"electronics\",\n\t\t\"erotic\",\n\t\t\"fabric\",\n\t\t\"farm\",\n\t\t\"fashion\",\n\t\t\"fishing\",\n\t\t\"florist\",\n\t\t\"frame\",\n\t\t\"funeral_directors\",\n\t\t\"furniture\",\n\t\t\"general\",\n\t\t\"gift\",\n\t\t\"hairdresser\",\n\t\t\"hardware\",\n\t\t\"hearing_aids\",\n\t\t\"herbalist\",\n\t\t\"hifi\",\n\t\t\"hunting\",\n\t\t\"interior_decoration\",\n\t\t\"jewelry\",\n\t\t\"kiosk\",\n\t\t\"kitchen\",\n\t\t\"greengrocer\",\n\t\t\"grocery\",\n\t\t\"leather\",\n\t\t\"laundry\",\n\t\t\"mall\",\n\t\t\"massage\",\n\t\t\"medical_supply\",\n\t\t\"mobile_phone\",\n\t\t\"money_lender\",\n\t\t\"motorcycle\",\n\t\t\"music\",\n\t\t\"musical_instrument\",\n\t\t\"newsagent\",\n\t\t\"optician\",\n\t\t\"organic\",\n\t\t\"outdoor\",\n\t\t\"pasta\",\n\t\t\"pet\",\n\t\t\"photo\",\n\t\t\"scuba_diving\",\n\t\t\"seafood\",\n\t\t\"second_hand\",\n\t\t\"shoes\",\n\t\t\"sports\",\n\t\t\"stationery\",\n\t\t\"supermarket\",\n\t\t\"tailor\",\n\t\t\"tattoo\",\n\t\t\"tea\",\n\t\t\"ticket\",\n\t\t\"tobacco\",\n\t\t\"toys\",\n\t\t\"travel_agency\",\n\t\t\"tyres\",\n\t\t\"vacant\",\n\t\t\"variety_store\",\n\t\t\"video\",\n\t\t\"video_games\",\n\t\t\"water_sports\",\n\t\t\"weapons\",\n\t\t\"wine\"\n\t],\n\t\"sport\": [\n\t\t\"9pin\",\n\t\t\"10pin\",\n\t\t\"american_football\",\n\t\t\"archery\",\n\t\t\"athletics\",\n\t\t\"australian_football\",\n\t\t\"base\",\n\t\t\"badminton\",\n\t\t\"baseball\",\n\t\t\"beachvolleyball\",\n\t\t\"billiards\",\n\t\t\"bmx\",\n\t\t\"boules\",\n\t\t\"bowls\",\n\t\t\"boxing\",\n\t\t\"canoe\",\n\t\t\"chess\",\n\t\t\"climbing\",\n\t\t\"climbing_adventure\",\n\t\t\"cycling\",\n\t\t\"equestrian\",\n\t\t\"free_flying\",\n\t\t\"golf\",\n\t\t\"handball\",\n\t\t\"horse_racing\",\n\t\t\"karting\",\n\t\t\"kitesurfing\",\n\t\t\"model_aerodrome\",\n\t\t\"motocross\",\n\t\t\"motor\",\n\t\t\"multi\",\n\t\t\"roller_skating\",\n\t\t\"rugby_league\",\n\t\t\"rugby_union\",\n\t\t\"running\",\n\t\t\"sailing\",\n\t\t\"shooting\",\n\t\t\"skateboard\",\n\t\t\"skiing\",\n\t\t\"soccer\",\n\t\t\"swimming\",\n\t\t\"tennis\",\n\t\t\"volleyball\"\n\t],\n\t\"railway\": [\n\t\t\"abandoned\",\n\t\t\"buffer_stop\",\n\t\t\"construction\",\n\t\t\"crossing\",\n\t\t\"disused\",\n\t\t\"funicular\",\n\t\t\"halt\",\n\t\t\"level_crossing\",\n\t\t\"miniature\",\n\t\t\"narrow_gauge\",\n\t\t\"preserved\",\n\t\t\"rail\",\n\t\t\"station\",\n\t\t\"subway\",\n\t\t\"subway_entrance\",\n\t\t\"switch\",\n\t\t\"tram\",\n\t\t\"tram_stop\"\n\t],\n\t\"route\": [\n\t\t\"bicycle\",\n\t\t\"bus\",\n\t\t\"ferry\",\n\t\t\"hiking\",\n\t\t\"mtb\",\n\t\t\"pipeline\",\n\t\t\"piste\",\n\t\t\"power\",\n\t\t\"railway\",\n\t\t\"road\",\n\t\t\"ski\",\n\t\t\"train\",\n\t\t\"tram\"\n\t],\n\t\"tourism\": [\n\t\t\"alpine_hut\",\n\t\t\"apartement\",\n\t\t\"attraction\",\n\t\t\"artwork\",\n\t\t\"camp_site\",\n\t\t\"caravan_site\",\n\t\t\"chalet\",\n\t\t\"gallery\",\n\t\t\"guest_house\",\n\t\t\"hostel\",\n\t\t\"hotel\",\n\t\t\"information\",\n\t\t\"motel\",\n\t\t\"museum\",\n\t\t\"picnic_site\",\n\t\t\"theme_park\",\n\t\t\"viewpoint\",\n\t\t\"zoo\",\n\t\t\"yes\"\n\t],\n\t\"trees\": [\n\t\t\"almond_trees\",\n\t\t\"apple_trees\",\n\t\t\"apricot_trees\",\n\t\t\"avocado_trees\",\n\t\t\"banana_plants\",\n\t\t\"bayberry\",\n\t\t\"blackberry\",\n\t\t\"blueberry\",\n\t\t\"cacao_plants\",\n\t\t\"cherry_trees\",\n\t\t\"chestnut_trees\",\n\t\t\"coconut_palms\",\n\t\t\"coffea_plants\",\n\t\t\"cranberry\",\n\t\t\"custard_apple\",\n\t\t\"date_palms\",\n\t\t\"durian_trees\",\n\t\t\"ginkgo_trees\",\n\t\t\"governor's_plum\",\n\t\t\"guava_trees\",\n\t\t\"hazel_plants\",\n\t\t\"lemon_trees\",\n\t\t\"lychee_trees\",\n\t\t\"macadamia_trees\",\n\t\t\"mandarin_trees\",\n\t\t\"mango_trees\",\n\t\t\"mulberrie_trees\",\n\t\t\"olive_trees\",\n\t\t\"orange_trees\",\n\t\t\"papaya_trees\",\n\t\t\"peach_trees\",\n\t\t\"pear_trees\",\n\t\t\"pecan_trees\",\n\t\t\"persimmon_trees\",\n\t\t\"pineapple_plants\",\n\t\t\"pistachio_trees\",\n\t\t\"plum_trees\",\n\t\t\"pomegranate_trees\",\n\t\t\"rambutan_trees\",\n\t\t\"raspberry\",\n\t\t\"sand_pear\",\n\t\t\"tea_plants\",\n\t\t\"walnut_trees\"\n\t],\n\t\"waterway\": [\n\t\t\"canal\",\n\t\t\"ditch\",\n\t\t\"dam\",\n\t\t\"dock\",\n\t\t\"drain\",\n\t\t\"river\",\n\t\t\"riverbank\",\n\t\t\"stream\",\n\t\t\"weir\"\n\t]\n}","import { useState } from \"react\";\nimport { fromLonLat } from \"ol/proj\";\nimport { osm } from \"./MapComponents/Source\";\nimport MapContextWrapper from \"./MapComponents/MapContextWrapper\";\nimport TileLayer from \"./MapComponents/Layers/TileLayer\";\nimport useOLMap from \"./MapComponents/useOLMap\";\nimport { Vector as VectorLayer } from 'ol/layer';\nimport { Vector as VectorSource } from 'ol/source';\nimport { Circle, Fill, Style, Stroke } from 'ol/style';\nimport { Feature } from 'ol/index';\nimport \"./styles.css\";\nimport \"ol/ol.css\";\nimport Select from 'react-select';\nimport { OSM } from './osm_const';\nimport OverpassFrontend from 'overpass-frontend';\nimport Point from 'ol/geom/Point';\nimport Polygon from 'ol/geom/Polygon';\nimport LineString from 'ol/geom/LineString';\nimport { GeoJSON } from 'ol/format';\nimport { transformExtent } from \"ol/proj\";\nimport { Popup } from 'ol/index';\n\nconst overpassFrontend = new OverpassFrontend('//overpass-api.de/api/interpreter')\n\n\nconst toTitleCase = str => str.replace(/\\w\\S*/g, txt => txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase());\n\nexport default function App() {\n  const { mapRef, map } = useOLMap({ scaleBar: false });\n  const [osmkey, setOsmkey] = useState(null);\n  const [osmvalue, setOsmvalue] = useState(null);\n  const [valueOptions, setValueOptions] = useState([]);\n\n  var keyOptions = []\n\n  Object.keys(OSM).forEach(key => {\n    keyOptions.push({ value: key, label: toTitleCase(key).replace('_', \" \") })\n  });\n\n  const onChange = e => {\n    var a = []\n    OSM[e].forEach(value => a.push({ value: value, label: toTitleCase(value).replace('_', \" \") }))\n    setValueOptions(a);\n    setOsmkey(e);\n  }\n\n  const OSMQuery = () => {\n    const extent = transformExtent(map.getView().calculateExtent(), 'EPSG:3857', 'EPSG:4326')\n    overpassFrontend.BBoxQuery(\n      `nwr[${osmkey}=${osmvalue}]`,\n      { minlat: extent[1], maxlat: extent[3], minlon: extent[0], maxlon: extent[2] },\n      {\n        properties: OverpassFrontend.ALL\n      },\n      function (err, result) {\n        if (result.data.type === 'node') {\n          var marker = new Point(fromLonLat([result.geometry.lon, result.geometry.lat]));\n          var point = new VectorLayer({\n            source: new VectorSource({\n              features: [new Feature(marker)],\n            }),\n            style: new Style({\n              image: new Circle({\n                radius: 5,\n                fill: new Fill({ color: 'red' }),\n              }),\n            }),\n          //   eventListeners:{\n          //     'featureselected':function(evt){\n          //         var feature = evt.feature;\n          //         var popup = new Popup.FramedCloud(\"popup\",\n          //             OpenLayers.LonLat.fromString(feature.geometry.toShortString()),\n          //             null,\n          //             feature.attributes.message+\"<br>\"+feature.attributes.location,\n          //             null,\n          //             true,\n          //             null\n          //         );\n          //         popup.autoSize = true;\n          //         popup.maxSize = new OpenLayers.Size(400,800);\n          //         popup.fixedRelativePosition = true;\n          //         feature.popup = popup;\n          //         map.addPopup(popup);\n          //     },\n          //     'featureunselected':function(evt){\n          //         var feature = evt.feature;\n          //         map.removePopup(feature.popup);\n          //         feature.popup.destroy();\n          //         feature.popup = null;\n          //     }\n          // }\n          });\n          map.addLayer(point);\n        }\n        else if (result.data.type === 'way') {\n          var linekeys = ['highway', 'cycleway', 'railway', 'route', 'waterway']\n          if (linekeys.includes(osmkey)) {\n            var linearray = [];\n            result.geometry.forEach(point => {\n              linearray.push(fromLonLat([point.lon, point.lat]))\n            })\n            var line = new LineString(linearray);\n            var feature = new Feature(line);\n            var linelayer = new VectorLayer({\n              source: new VectorSource({\n                features: [feature],\n              }),\n              style: new Style({\n                stroke: new Stroke({\n                  color: 'blue',\n                  width: 3,\n                }),\n              }),\n            });\n            map.addLayer(linelayer);\n          }\n          else {\n            var polyarray = [];\n            result.geometry.forEach(point => {\n              polyarray.push(fromLonLat([point.lon, point.lat]))\n            })\n            var polygon = new Polygon([polyarray]);\n            var polygonFeature = new Feature(polygon);\n            var polygonLayer = new VectorLayer({\n              source: new VectorSource({\n                features: [polygonFeature],\n              }),\n              style: new Style({\n                stroke: new Stroke({\n                  color: 'yellow',\n                  width: 2,\n                }),\n                fill: new Fill({\n                  color: 'rgba(0, 255, 0, 0.5)',\n                }),\n              }),\n            });\n            map.addLayer(polygonLayer);\n          }\n        }\n        else { console.log('relation', result) }\n      },\n      function (err) {\n        if (err) { console.log(err) }\n      }\n    );\n  }\n\n  const clearMap = () => {\n    const layers = [...map.getLayers().getArray()];\n    layers.forEach((layer, index) => { if (index !== 0) { map.removeLayer(layer) } });\n  }\n\n  const downloadFeature = () => {\n    const layers = [...map.getLayers().getArray()];\n    var geom = [];\n    layers.forEach((layer, index) => {\n      if (index !== 0) {\n        geom.push(new Feature(layer.getSource().getFeatures()))\n      }\n    });\n    var downloadGeometry = new VectorLayer({\n      source: new VectorSource({\n        features: geom,\n      }),\n    });\n    var json = new GeoJSON().writeFeatures(downloadGeometry.getSource().getFeatures(), {\n      featureProjection: 'EPSG:4326'\n    });\n    var blob = new Blob([json], { type: 'application/json' });\n    var url = URL.createObjectURL(blob);\n    var a = document.createElement('a');\n    a.href = url;\n    a.download = 'download.geojson';\n    a.click();\n  }\n\n  return (\n    <div className=\"App\">\n      <Select options={keyOptions} onChange={e => onChange(e.value)} />\n      <Select options={valueOptions} onChange={e => setOsmvalue(e.value)} />\n      <button onClick={OSMQuery}>Query</button>\n      <button onClick={clearMap}>Clear</button>\n      <button onClick={downloadFeature}>Download</button>\n      <MapContextWrapper\n        mapRef={mapRef}\n        providerValue={{ map }}\n        zoom={12}\n        center={fromLonLat([84.5, 28.3])}\n        style={{ width: \"100vw\", height: \"100vh\" }}\n      >\n        <TileLayer source={osm()} zIndex={0} type=\"base\" title=\"OSM Base Map\" />\n      </MapContextWrapper>\n\n    </div>\n  );\n}\n","import { BingMaps, OSM, Vector as VectorSource, XYZ } from 'ol/source';\n\nexport const osm = () => {\n  return new OSM();\n};\n\nexport const vector = ({ features }) => {\n  return new VectorSource({\n    features,\n  });\n};\n\nexport const xyz = ({ url, attributions, maxZoom, layer }) => {\n  return new XYZ({ url, attributions, maxZoom, layer });\n};\n\nexport const bingMaps = ({ key, imagerySet, maxZoom }) => {\n  return new BingMaps({ key, imagerySet, maxZoom });\n};\n","import { StrictMode } from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(\n  <StrictMode>\n    <App />\n  </StrictMode>,\n  rootElement\n);\n"],"sourceRoot":""}