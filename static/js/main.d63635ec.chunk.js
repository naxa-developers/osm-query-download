(this["webpackJsonpop-vt"]=this["webpackJsonpop-vt"]||[]).push([[0],{306:function(e,a,t){},341:function(e,a){},343:function(e,a){},489:function(e,a){},509:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t(73),i=t.n(n),o=t(19),s=t(23),c=t(6),l=t(548),u=t(563),d=(t(260),t(567),t(115)),p=t(175),b=Object(r.createContext)(),m=t(3),h=["mapRef","children"],f=function(e){var a=e.mapRef,t=e.children,r=Object(p.a)(e,h);return Object(m.jsx)("div",Object(d.a)(Object(d.a)({ref:a,id:"ol-map",className:"ol-map"},r),{},{children:t}))},g=["providerValue","children"],y=function(e){var a=e.providerValue,t=e.children,r=Object(p.a)(e,g);return Object(m.jsx)(b.Provider,{value:a,children:Object(m.jsx)(f,Object(d.a)(Object(d.a)({},r),{},{children:t}))})};y.defaultProps={providerValue:{}};var _=y,j=t(26),w=t.n(j),v=t(273),x=function(e){var a=e.source,t=e.zIndex,n=e.type,i=e.title,o=e.visible,s=Object(r.useContext)(b).map;return Object(r.useEffect)((function(){if(!s)return function(){};var e=new v.a({source:a,type:n,zIndex:t,title:i,visible:o});return s.addLayer(e),e.setZIndex(t),function(){s&&s.removeLayer(e)}}),[s]),null};x.defaultProps={type:"layer",title:"",visible:!0,zIndex:0},x.propTypes={source:w.a.object.isRequired,zIndex:w.a.number,type:w.a.string,title:w.a.string,visible:w.a.bool};var O=x,k=t(270),S=t(274),E=t(2),L=t(271),C=t(213);var z=function(e){var a=e.scaleBar,t=void 0!==a&&a,n=Object(r.useRef)(),i=Object(r.useState)(null),o=Object(s.a)(i,2),c=o[0],l=o[1],u=Object(r.useState)(null),d=Object(s.a)(u,2),p=d[0],b=d[1];return Object(r.useEffect)((function(){var e={layers:[],controls:[],overlays:[],view:new S.a({center:[9508595.54043558,3212952.3094566735],zoom:14}),target:n.current},a=new k.a(e);return l(a),a.addControl(new C.a({units:"metric",bar:!0,steps:4,text:!0,minWidth:140})),function(){return a.setTarget(void 0)}}),[t]),Object(r.useEffect)((function(){if(c)return c.on("rendercomplete",e),function(){return c&&c.un("rendercomplete",e)};function e(){var a=E.j();c.getLayers().forEach((function(e){e instanceof L.a&&E.q(a,e.getSource().getExtent())})),a[0]!==1/0&&(setTimeout((function(){b(!0)}),500),c.un("rendercomplete",e))}}),[c]),{mapRef:n,map:c,renderComplete:p}},I=t(204),P=t(207),R=t(177),A=t(136),q=t(262),B=(t(306),t(307),t(206)),N={aeroway:["aerodrome","apron","control_tower","control_center","gate","hangar","helipad","heliport","navigationaid","beacon","runway","taxilane","taxiway","terminal","windsock","highway_strip"],admin_level:["1","2","3","4","5","7","8","9","10","11"],amenity:["animal_boarding","animal_shelter","arts_centre","atm","bank","bar","bench","bbq","bicycle_parking","bicycle_rental","biergarten","bus_station","cafe","casino","car_rental","car_sharing","car_wash","clinic","clock","cinema","college","community_centre","coworking_space","crematorium","dentist","doctors","drinking_water","embassy","fast_food","fire_station","fountain","fuel","gambling","grave_yard","hospital","kindergarten","library","marketplace","nightclub","parking","pharmacy","place_of_worship","planetarium","police","post_box","post_office","prison","pub","recycling","restaurant","school","shelter","shower","social_facility","social_centre","swingerclub","taxi","theatre","toilets","townhall","university","vending_machine","veterinary"],boundary:["administrative","maritime","national_park","religious_administration","protected_area"],building:["apartments","commercial","farm","hotel","house","industrial","retail","yes"],crop:["bananas","barley","berry_plants","corn","dairy","dry_farming","feed_lot","field_cropland","flowers","grape","grass","hay","native_pasture","no","orchid","potatoes","poultry","rape","rice","strawberry","yes","wheat"],cuisine:["bagel","barbecue","bougatsa","burger","cake","casserole","chicken","coffee_shop","crepe","couscous","curry","dessert","donut","doughnut","empanada","fish","fish_and_chips","fried_food","friture","gyro","ice_cream","kebab","mediterranean","noodle","pancake","pasta","pie","pizza","regional","sandwich","sausage","savory_pancakes","seafood","steak_house","sub","sushi","tapas","vegan","vegetarian","wings"],craft:["agricultural_engines","basket_maker","beekeeper","blacksmith","brewery","boatbuilder","carpenter","caterer","confectionery","dressmaker","electrician","gardener","glaziery","handicraft","hvac","insulation","jeweller","key_cutter","optician","painter","photographer","plumber","roofer","tailor","watchmaker","winery"],emergency:["ambulance_station","assembly_point","defibrillator","fire_extinguisher","fire_hydrant","phone","siren","water_tank"],evacuation_center:["yes"],highway:["motorway","trunk","primary","secondary","tertiary","unclassified","residential","living_street","service","track","road","footway","pedestrian","cycleway","steps","path","construction","bus_stop","crossing","mini_roundabout","speed_camera","stop","street_lamp","traffic_signals","turning_circle"],cycleway:["lane","opposite","opposite_lane","track","opposite_track","share_busway","shared_lane"],junction:["roundabout","jughandle","filter","yes"],historic:["archaeological_site","aircraft","battlefield","boundary_stone","building","castle","cannon","city_gate","citywalls","farm","fort","manor","memorial","monument","ruins","rune_stone","ship","wayside_cross","wayside_shrine","yes"],landuse:["allotments","basin","brownfield","cemetery","commercial","construction","farm","farmland","farmyard","forest","garages","grass","greenfield","industrial","landfill","meadow","military","orchard","plant_nursery","quarry","railway","reservoir","residential","retail","vineyard"],leisure:["fishing","garden","golf_course","hackerspace","marina","miniature_golf","nature_reserve","park","pitch","playground","sports_centre","stadium","swimming_pool","track","water_park"],man_made:["chimney","cross","lighthouse","monitoring_station","pier","pipeline","surveillance","survey_point","tower","water_tower","works","yes"],natural:["bay","beach","cave_entrance","cliff","crater","coastline","fell","fumarole","glacier","grassland","heath","mud","peak","saddle","sand","scree","scrub","spring","stone","tree","tree_row","volcano","water","wetland","wood"],office:["accountant","administrative","architect","association","company","educational_institution","employment_agency","estate_agent","forestry","foundation","government","guide","insurance","it","lawyer","newspaper","ngo","notary","political_party","quango","register","religion","research","tax","telecommunication","travel_agent","water_utility"],place:["allotments","archipelago","city","continent","county","country","district","farm","hamlet","island","islet","isolated_dwelling","locality","municipality","neighbourhood","province","state","suburb","region","town","village"],power:["cable","plant","generator","line","minor_line","pole","substation","switch","tower","transformer"],produce:["berries","cassava","cereal","christmas_trees","cork","crocodile","dry_farming","fire_wood","fish","flowers","forage","hay","herbs","hide","hop","latex","lavender","live_animal","maize","maple_syrup","meat","mussels","nut","oil","olive","oysters","prawns","rape","rice","seaweed","shrimp","spice","sugarcane","sunflower","tea","timber","turf","vegetable"],public_transport:["stop_position","platform","station","stop_area"],shop:["alcohol","antiques","art","baby_goods","bakery","bag","bathroom_furnishing","beauty","bed","beverages","bicycle","books","boutique","butcher","car","car_repair","car_parts","carpet","charity","cheese","chemist","chocolate","clothes","coffee","computer","confectionery","convenience","copyshop","cosmetics","craft","curtain","deli","department_store","dairy","dry_cleaning","doityourself","electronics","erotic","fabric","farm","fashion","fishing","florist","frame","funeral_directors","furniture","general","gift","hairdresser","hardware","hearing_aids","herbalist","hifi","hunting","interior_decoration","jewelry","kiosk","kitchen","greengrocer","grocery","leather","laundry","mall","massage","medical_supply","mobile_phone","money_lender","motorcycle","music","musical_instrument","newsagent","optician","organic","outdoor","pasta","pet","photo","scuba_diving","seafood","second_hand","shoes","sports","stationery","supermarket","tailor","tattoo","tea","ticket","tobacco","toys","travel_agency","tyres","vacant","variety_store","video","video_games","water_sports","weapons","wine"],sport:["9pin","10pin","american_football","archery","athletics","australian_football","base","badminton","baseball","beachvolleyball","billiards","bmx","boules","bowls","boxing","canoe","chess","climbing","climbing_adventure","cycling","equestrian","free_flying","golf","handball","horse_racing","karting","kitesurfing","model_aerodrome","motocross","motor","multi","roller_skating","rugby_league","rugby_union","running","sailing","shooting","skateboard","skiing","soccer","swimming","tennis","volleyball"],railway:["abandoned","buffer_stop","construction","crossing","disused","funicular","halt","level_crossing","miniature","narrow_gauge","preserved","rail","station","subway","subway_entrance","switch","tram","tram_stop"],route:["bicycle","bus","ferry","hiking","mtb","pipeline","piste","power","railway","road","ski","train","tram"],tourism:["alpine_hut","apartement","attraction","artwork","camp_site","caravan_site","chalet","gallery","guest_house","hostel","hotel","information","motel","museum","picnic_site","theme_park","viewpoint","zoo","yes"],trees:["almond_trees","apple_trees","apricot_trees","avocado_trees","banana_plants","bayberry","blackberry","blueberry","cacao_plants","cherry_trees","chestnut_trees","coconut_palms","coffea_plants","cranberry","custard_apple","date_palms","durian_trees","ginkgo_trees","governor's_plum","guava_trees","hazel_plants","lemon_trees","lychee_trees","macadamia_trees","mandarin_trees","mango_trees","mulberrie_trees","olive_trees","orange_trees","papaya_trees","peach_trees","pear_trees","pecan_trees","persimmon_trees","pineapple_plants","pistachio_trees","plum_trees","pomegranate_trees","rambutan_trees","raspberry","sand_pear","tea_plants","walnut_trees"],waterway:["canal","ditch","dam","dock","drain","river","riverbank","stream","weir"]},V=t(205),F=t.n(V),G=t(90),U=t(70),T=t(99),J=t(566),M=t(267),Q=t.n(M),D=t(268),W=t.n(D),Z=t(265),H=t.n(Z),K=t(266),X=t.n(K),Y=t(269),$=t.n(Y),ee=t(568),ae=t(558),te=t.p+"static/media/logo_n.6d900a8f.png",re=t(565),ne=t(561),ie=t(263),oe=t.n(ie),se=(t.p,function(e){var a=document.createElement("input");a.setAttribute("type","file"),a.setAttribute("accept",".geojson,.gpx,.csv,.kml,.wkt,.zip"),a.addEventListener("change",(function(a){var t=a.target.files[0],r=new FileReader,n=t.name.split(".");"zip"==n[n.length-1].toLowerCase()?function(e){e.arrayBuffer().then((function(e){oe()(e).then((function(e){console.log(e)}))}))}(t):r.onload=function(a){var t=JSON.parse(a.target.result),r=new ne.a({featureProjection:Object(c.g)("EPSG:3857")}).readFeatures(t),n=new L.a({source:new u.a({features:r}),style:new I.b({stroke:new A.a({color:"blue",width:3})})});e.addLayer(n),e.getView().fit(n.getSource().getExtent())},r.readAsText(t)})),a.click()}),ce=t(559),le=t(569),ue=t(562),de=t(570),pe=t(572),be=t(571),me=t(180),he=t.n(me),fe=function(e){var a=e.open,t=e.handleClose;return Object(m.jsx)(ce.a,{open:a,onClose:t,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:Object(m.jsxs)(le.a,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",border:"2px solid #fff",boxShadow:24,p:4},children:[Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(de.a,{expandIcon:Object(m.jsx)(he.a,{}),"aria-controls":"panel1a-content",id:"panel1a-header",children:Object(m.jsx)(be.a,{children:"Point"})}),Object(m.jsx)(pe.a,{children:Object(m.jsx)(be.a,{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse malesuada lacus ex, sit amet blandit leo lobortis eget."})})]}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(de.a,{expandIcon:Object(m.jsx)(he.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(m.jsx)(be.a,{children:"LineString"})}),Object(m.jsx)(pe.a,{children:Object(m.jsx)(be.a,{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse malesuada lacus ex, sit amet blandit leo lobortis eget."})})]}),Object(m.jsxs)(ue.a,{children:[Object(m.jsx)(de.a,{expandIcon:Object(m.jsx)(he.a,{}),"aria-controls":"panel2a-content",id:"panel2a-header",children:Object(m.jsx)(be.a,{children:"Polygon"})}),Object(m.jsx)(pe.a,{children:Object(m.jsx)(be.a,{children:"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse malesuada lacus ex, sit amet blandit leo lobortis eget."})})]})]})})},ge=new F.a("//overpass-api.de/api/interpreter"),ye=function(e){return e.replace(/\w\S*/g,(function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()}))};function _e(){var e=Object(r.useState)(!1),a=Object(s.a)(e,2),t=a[0],n=a[1],i=z({scaleBar:!1}),d=i.mapRef,p=i.map,b=Object(r.useState)(null),h=Object(s.a)(b,2),f=h[0],g=h[1],y=Object(r.useState)(null),j=Object(s.a)(y,2),w=j[0],v=j[1],x=Object(r.useState)([]),k=Object(s.a)(x,2),S=k[0],E=k[1],C=[];Object.keys(N).forEach((function(e){C.push({value:e,label:ye(e).replace("_"," ")})}));return Object(m.jsxs)("div",{className:"App",children:[Object(m.jsxs)(re.a,{container:!0,spacing:2,className:"top-bar",children:[Object(m.jsx)(re.a,{item:!0,xs:1,children:Object(m.jsx)("img",{src:te,className:"App-logo",alt:"logo",height:40})}),Object(m.jsx)(re.a,{item:!0,xs:3,children:Object(m.jsx)(B.a,{options:C,onChange:function(e){return function(e){var a=[];N[e].forEach((function(e){return a.push({value:e,label:ye(e).replace("_"," ")})})),E(a),g(e)}(e.value)}})}),Object(m.jsx)(re.a,{item:!0,xs:3,children:Object(m.jsx)(B.a,{options:S,onChange:function(e){return v(e.value)}})}),Object(m.jsxs)(re.a,{item:!0,xs:5,children:[Object(m.jsx)(ae.a,{title:"Upload",children:Object(m.jsx)(J.a,{variant:"outlined",startIcon:Object(m.jsx)(H.a,{}),onClick:function(){return se(p)},children:"Upload"})}),Object(m.jsx)(J.a,{variant:"contained",startIcon:Object(m.jsx)(X.a,{}),onClick:function(){var e=Object(c.o)(p.getView().calculateExtent(),"EPSG:3857","EPSG:4326");ge.BBoxQuery("nwr[".concat(f,"=").concat(w,"]"),{minlat:e[1],maxlat:e[3],minlon:e[0],maxlon:e[2]},{properties:F.a.ALL},(function(e,a){if("node"===a.data.type){var t=new G.a(Object(c.d)([a.geometry.lon,a.geometry.lat])),r=new L.a({source:new u.a({features:[new q.a(t)]}),style:new I.b({image:new P.a({radius:5,fill:new R.a({color:"red"})})})});p.addLayer(r)}else if("way"===a.data.type){if(["highway","cycleway","railway","route","waterway"].includes(f)){var n=[];a.geometry.forEach((function(e){n.push(Object(c.d)([e.lon,e.lat]))}));var i=new T.a(n),o=new q.a(i),s=new L.a({source:new u.a({features:[o]}),style:new I.b({stroke:new A.a({color:"blue",width:3})})});p.addLayer(s)}else{var l=[];a.geometry.forEach((function(e){l.push(Object(c.d)([e.lon,e.lat]))}));var d=new U.a([l]),b=new q.a(d),m=new L.a({source:new u.a({features:[b]}),style:new I.b({stroke:new A.a({color:"yellow",width:2}),fill:new R.a({color:"rgba(0, 255, 0, 0.5)"})})});p.addLayer(m)}}else console.log("relation",a)}),(function(e){e&&console.log(e)}))},children:"Query"}),Object(m.jsx)(ae.a,{title:"Clear",children:Object(m.jsx)(J.a,{variant:"fill",startIcon:Object(m.jsx)(Q.a,{}),onClick:function(){Object(o.a)(p.getLayers().getArray()).forEach((function(e,a){0!==a&&p.removeLayer(e)}))},children:"Clear"})}),Object(m.jsx)(ae.a,{title:"Download",children:Object(m.jsx)(ee.a,{onClick:function(){return function(e){if(e){var a=Object(o.a)(e.getLayers().getArray()),t=[];a.forEach((function(e,a){0!==a&&t.push(new q.a(e.getSource().getFeatures()))}));var r=new L.a({source:new u.a({features:t})}),n=(new ne.a).writeFeatures(r.getSource().getFeatures(),{dataProjection:"EPSG:3857",featureProjection:"EPSG:4326"}),i=new Blob([n],{type:"application/json"}),s=URL.createObjectURL(i),c=document.createElement("a");c.href=s,c.download="download.geojson",c.click()}}(p)},children:Object(m.jsx)(W.a,{})})}),Object(m.jsx)(ae.a,{title:"Setting",children:Object(m.jsx)(ee.a,{onClick:function(){return n(!0)},children:Object(m.jsx)($.a,{})})})]})]}),Object(m.jsx)(_,{mapRef:d,providerValue:{map:p},zoom:12,center:Object(c.d)([84.5,28.3]),className:"map",children:Object(m.jsx)(O,{source:new l.a,zIndex:0,type:"base",title:"OSM Base Map"})}),Object(m.jsx)(fe,{open:t,handleClose:function(){return n(!1)}})]})}var je=document.getElementById("root");i.a.render(Object(m.jsx)(r.StrictMode,{children:Object(m.jsx)(_e,{})}),je)}},[[509,1,2]]]);
//# sourceMappingURL=main.d63635ec.chunk.js.map